# Load the dataset package and the data
library(datasets)
data("EuStockMarkets")

# The EuStockMarkets dataset is a matrix where each column represents a stock index
dax_prices <- EuStockMarkets[, "DAX"]

# Calculate daily returns as the percentage change between consecutive days
dax_returns <- diff(dax_prices) / lag(dax_prices, -1) * 100

# Remove the NA generated by the diff function (first observation)
dax_returns <- na.omit(dax_returns)

# Convert the daily returns into a data frame for use with ggplot2
dax_returns_df <- data.frame(DAX_Returns = dax_returns)

# Load ggplot2 for plotting
library(ggplot2)

# Plot histogram and kernel density of DAX daily returns
ggplot(dax_returns_df, aes(x = DAX_Returns)) +
  geom_histogram(aes(y = ..density..), binwidth = 0.5, color = "black", fill = "blue") +
  geom_density(alpha = 0.2, fill = "#FF6666") +
  labs(
    title = "Density and Histogram of DAX Index Daily Returns",
    x = "Daily Returns (%)",
    y = "Density"
  )
       
